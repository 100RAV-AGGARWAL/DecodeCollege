<nb-layout>

    <nb-layout-column>
        <div fixed>
            <div class="text-center">
                <h2>{{portalIdentity}} Chat Portal</h2>
            </div>
            <div class="left">
                <button nbButton status="danger" (click)="closeChat()">Close Doubt</button>
            </div>
        </div>
        <div>
            <nb-chat [title]="title">
                <nb-chat-message *ngFor="let msg of messages$ | async as msgs" type="text" [message]="msg.text"
                    [reply]="msg.reply" [sender]="msg.sender" [date]="msg.date" [avatar]="msg.avatar!">
                </nb-chat-message>

                <nb-chat-message *ngIf="adminLoading$ | async as adminLoading" [nbSpinner]="adminLoading"
                    nbSpinnerStatus="info" type="text" avatar="assets/bot.jpeg" message="...">

                </nb-chat-message>

                <nb-chat-form (keyup)="onKey($event)" (send)="handleUserMessage($event)"></nb-chat-form>
            </nb-chat>
        </div>
    </nb-layout-column>
</nb-layout>